<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¿¡ä»°ä¸ç†æ€§æµ‹éªŒ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .container {
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 600px;
            width: 100%;
            padding: 40px;
        }
        
        h1 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 28px;
        }
        
        h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 18px;
        }
        
        .progress {
            background: #e0e0e0;
            height: 8px;
            border-radius: 4px;
            margin-bottom: 30px;
            overflow: hidden;
        }
        
        .progress-bar {
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            height: 100%;
            transition: width 0.3s ease;
        }
        
        .question {
            font-size: 18px;
            color: #333;
            margin-bottom: 25px;
            line-height: 1.6;
        }
        
        .options {
            display: grid;
            gap: 12px;
        }
        
        .option-btn {
            background: #f5f5f5;
            border: 2px solid #e0e0e0;
            padding: 16px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 16px;
            text-align: left;
            color: #333;
        }
        
        .option-btn:hover {
            background: #667eea;
            border-color: #667eea;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }
        
        .result {
            text-align: center;
        }
        
        .result h2 {
            color: #667eea;
            font-size: 24px;
            margin-bottom: 20px;
        }
        
        .analysis {
            background: #f5f5f5;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            font-size: 18px;
            line-height: 1.8;
            color: #333;
        }
        
        .scores {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 25px 0;
        }
        
        .score-item {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }
        
        .score-label {
            font-size: 14px;
            opacity: 0.9;
            margin-bottom: 8px;
        }
        
        .score-value {
            font-size: 32px;
            font-weight: bold;
        }
        
        .restart-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 16px 40px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-top: 20px;
        }
        
        .restart-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }
        
        @media (max-width: 480px) {
            .container {
                padding: 24px;
            }
            
            h1 {
                font-size: 24px;
            }
            
            .question {
                font-size: 16px;
            }
            
            .option-btn {
                padding: 14px;
                font-size: 15px;
            }
            
            .scores {
                grid-template-columns: 1fr;
            }
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes slideOut {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }
        
        .test-mode-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #ff9800;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(255, 152, 0, 0.4);
            font-size: 14px;
            font-weight: bold;
            z-index: 9999;
            transition: all 0.3s ease;
        }
        
        .test-mode-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(255, 152, 0, 0.6);
        }
    </style>
</head>
<body>
    <button id="testModeBtn" class="test-mode-btn" onclick="toggleTestMode()">ğŸ” Test Mode</button>
    <div class="container" id="app">
        <h1>ä¿¡ä»°ä¸ç†æ€§æµ‹éªŒ</h1>
        <div id="content"></div>
    </div>

    <script>
        const questionsData = [
            { q: "å¦‚æœæœ‰äººè¯´:æ‹œä¸‰æ‹œ,è´¢ç¥å°±ä¼šçœ·é¡¾ä½ ã€‚ä½ çš„ç¬¬ä¸€æ„Ÿè§‰æ˜¯ï¼Ÿ", options: [
                { text: "ç¡®å®æœ‰é“ç†ï¼Œç¥æ˜ä¼šä¿ä½‘", type: "faith" },
                { text: "ä¸å¦¨è¯•è¯•çœ‹ï¼Œä¹Ÿè®¸æœ‰ç”¨", type: "mixed" },
                { text: "è¿™æ˜¯è¿·ä¿¡ï¼Œæ²¡æœ‰ç§‘å­¦ä¾æ®", type: "reason" },
                { text: "æ— æ‰€è°“ï¼Œä¿¡ä¸ä¿¡éƒ½è¡Œ", type: "fate" }
            ]},
            { q: "è¿‡å¹´æ—¶äº²å‹æ‹‰ä½ å»æ‹œè´¢ç¥ï¼Œä½ ä¼šï¼š", options: [
                { text: "å¾ˆå¼€å¿ƒï¼Œè¿™æ˜¯å¥½äº‹", type: "faith" },
                { text: "è·Ÿç€å»ï¼Œå°Šé‡ä¹ ä¿—", type: "mixed" },
                { text: "å§”å©‰æ‹’ç»ï¼Œæˆ‘ä¸ä¿¡è¿™äº›", type: "reason" },
                { text: "éšä¾¿ï¼Œå»ä¸å»éƒ½å¯ä»¥", type: "fate" }
            ]},
            { q: "å¦‚æœä½ ä¸­å½©ç¥¨ï¼Œä½ ä¼šè§‰å¾—æ˜¯ï¼š", options: [
                { text: "æ˜¯ç¥æ˜åœ¨çœ·é¡¾æˆ‘", type: "faith" },
                { text: "è¿æ°”å’Œæ¦‚ç‡çš„ç»“æœ", type: "mixed" },
                { text: "çº¯ç²¹çš„éšæœºæ¦‚ç‡äº‹ä»¶", type: "reason" },
                { text: "å‘½ä¸­æ³¨å®šè¯¥æœ‰è¿™ä¸€ç¬”", type: "fate" }
            ]},
            { q: "ä½ æ˜¯å¦ç›¸ä¿¡'å¿ƒè¯šåˆ™çµ'ï¼Ÿ", options: [
                { text: "ç»å¯¹ç›¸ä¿¡ï¼Œå¿ƒè¯šæœ€é‡è¦", type: "faith" },
                { text: "æœ‰ä¸€å®šé“ç†ï¼Œå¿ƒæ€å¾ˆé‡è¦", type: "mixed" },
                { text: "ä¸ä¿¡ï¼Œç»“æœå–å†³äºè¡ŒåŠ¨", type: "reason" },
                { text: "ä¿¡ä¸ä¿¡éƒ½ä¸€æ ·ï¼Œè¯¥æ¥çš„ä¼šæ¥", type: "fate" }
            ]},
            { q: "åœ¨ä½ çœ‹æ¥ï¼Œè´¢å¯Œçš„è·å¾—æ›´æ¥è¿‘ï¼š", options: [
                { text: "ç¥æ˜çš„åº‡ä½‘å’Œä¿ä½‘", type: "faith" },
                { text: "åŠªåŠ›åŠ ä¸Šä¸€äº›è¿æ°”", type: "mixed" },
                { text: "å®Œå…¨é è‡ªå·±çš„åŠªåŠ›", type: "reason" },
                { text: "å‘½è¿æ—©å·²æ³¨å®šå¥½äº†", type: "fate" }
            ]},
            { q: "é¢å¯¹äººç”Ÿå›°å¢ƒï¼Œä½ æ›´å¸¸æ±‚åŠ©ï¼š", options: [
                { text: "ç¥ˆç¥·æˆ–å®—æ•™ä»ªå¼", type: "faith" },
                { text: "æ‰¾å®¶äººæœ‹å‹å€¾è¯‰", type: "mixed" },
                { text: "å¯»æ±‚ä¸“ä¸šäººå£«å¸®åŠ©", type: "reason" },
                { text: "é¡ºå…¶è‡ªç„¶ï¼Œä¸åˆ»æ„è§£å†³", type: "fate" }
            ]},
            { q: "ä½ å¬åˆ°'æ‹œä¸‰æ‹œ'ï¼Œæœ€å…ˆè”æƒ³åˆ°ï¼š", options: [
                { text: "åº™å®‡é‡Œçš„è™”è¯šç¥ˆç¥·", type: "faith" },
                { text: "ä¼ ç»Ÿæ–‡åŒ–çš„ä¸€éƒ¨åˆ†", type: "mixed" },
                { text: "å°å»ºè¿·ä¿¡çš„æ®‹ç•™", type: "reason" },
                { text: "ä¸€ç§ä¹ æƒ¯è€Œå·²ï¼Œæ²¡æ·±ç©¶", type: "fate" }
            ]},
            { q: "ä½ æ›´å®¹æ˜“æ¥å—çš„ç¥ç¦è¯­æ˜¯ï¼š", options: [
                { text: "æ„¿ä½›ç¥–/ä¸Šå¸ä¿ä½‘ä½ ", type: "faith" },
                { text: "ç¥ä½ å¥½è¿ï¼Œä¸€åˆ‡é¡ºåˆ©", type: "mixed" },
                { text: "ç›¸ä¿¡ä½ çš„èƒ½åŠ›å’ŒåŠªåŠ›", type: "reason" },
                { text: "é¡ºå…¶è‡ªç„¶å°±å¥½", type: "fate" }
            ]},
            { q: "ä½ è§‰å¾—'å‘½è¿'æ˜¯å¦å­˜åœ¨ï¼Ÿ", options: [
                { text: "å­˜åœ¨ï¼Œæ˜¯ä¸Šå¤©çš„å®‰æ’", type: "faith" },
                { text: "ä¸‰åˆ†å¤©æ³¨å®šï¼Œä¸ƒåˆ†é æ‰“æ‹¼", type: "mixed" },
                { text: "ä¸å­˜åœ¨ï¼Œäººå®šèƒœå¤©", type: "reason" },
                { text: "å®Œå…¨å­˜åœ¨ï¼Œä¸€åˆ‡æ—©å·²æ³¨å®š", type: "fate" }
            ]},
            { q: "ä½ å¯¹é£æ°´çš„æ€åº¦ï¼š", options: [
                { text: "æ·±ä¿¡ä¸ç–‘ï¼Œä¼šè®¤çœŸå¸ƒå±€", type: "faith" },
                { text: "æœ‰ä¸€å®šé“ç†ï¼Œå¯ä»¥å‚è€ƒ", type: "mixed" },
                { text: "çº¯å±è¿·ä¿¡ï¼Œæ²¡æœ‰ä¾æ®", type: "reason" },
                { text: "ä¸åœ¨ä¹ï¼Œéšä¾¿æ€æ ·éƒ½è¡Œ", type: "fate" }
            ]},
            { q: "ä½ æ›´å€¾å‘çš„ä»·å€¼è§‚ï¼š", options: [
                { text: "ä½›å®¶ï¼šå› æœè½®å›ï¼Œç§¯å¾·è¡Œå–„", type: "faith" },
                { text: "é“å®¶ï¼šå¹³è¡¡å’Œè°ï¼Œé¡ºåº”è‡ªç„¶", type: "mixed" },
                { text: "ç°ä»£ï¼šç†æ€§æ€è€ƒï¼Œè‡ªæˆ‘å®ç°", type: "reason" },
                { text: "éšç¼˜å°±å¥½ï¼Œä¸è¿½æ±‚ä»€ä¹ˆ", type: "fate" }
            ]},
            { q: "å¦‚æœæœ‰äººè¯·ä½ å‚åŠ å®—æ•™æ´»åŠ¨ï¼Œä½ ä¼šï¼š", options: [
                { text: "å¾ˆæ„¿æ„ï¼Œè¿™æ˜¯ä¿®è¡Œ", type: "faith" },
                { text: "çœ‹æƒ…å†µï¼Œå¦‚æœåˆé€‚å°±å»", type: "mixed" },
                { text: "ä¸å»ï¼Œæˆ‘ä¸ä¿¡å®—æ•™", type: "reason" },
                { text: "æ— æ‰€è°“ï¼Œå»ä¸å»éƒ½å¯ä»¥", type: "fate" }
            ]},
            { q: "ä½ å¯¹ç¥­ç¥–ä¹ ä¿—çš„æ€åº¦ï¼š", options: [
                { text: "å¿…é¡»ä¼ æ‰¿ï¼Œæ…ç»ˆè¿½è¿œ", type: "faith" },
                { text: "ä¿ç•™å½¢å¼ï¼Œè¡¨è¾¾å¿ƒæ„", type: "mixed" },
                { text: "æ²¡å¿…è¦ï¼Œäººæ­»å¦‚ç¯ç­", type: "reason" },
                { text: "éšæ„ï¼Œåšä¸åšéƒ½è¡Œ", type: "fate" }
            ]},
            { q: "å½“ä½ å¬åˆ°'è™”è¯š'ä¸€è¯ï¼Œä½ çš„è”æƒ³æ˜¯ï¼š", options: [
                { text: "å¯¹ç¥æ˜çš„æ•¬ç•å’Œä¿¡ä»°", type: "faith" },
                { text: "ä¸€ç§çœŸè¯šçš„æ€åº¦", type: "mixed" },
                { text: "ç›²ç›®ç›¸ä¿¡ï¼Œç¼ºä¹ç†æ€§", type: "reason" },
                { text: "è™”ä¸è™”è¯šéƒ½æ— æ‰€è°“", type: "fate" }
            ]},
            { q: "æŠ•èµ„å‰ä½ ä¼šæ›´ä¾èµ–ï¼š", options: [
                { text: "å åœæˆ–æ±‚ç¥é—®åœ", type: "faith" },
                { text: "ç»“åˆä¸“å®¶æ„è§å’Œè‡ªå·±åˆ¤æ–­", type: "mixed" },
                { text: "å®Œå…¨ä¾é æ•°æ®åˆ†æ", type: "reason" },
                { text: "å‡­æ„Ÿè§‰ï¼Œéšä¾¿é€‰", type: "fate" }
            ]},
            { q: "å¦‚æœé’±åŒ…é‡Œå¤šæ”¾ä¸€å¼ 'æŠ¤èº«ç¬¦'ï¼Œä½ ä¼šè§‰å¾—ï¼š", options: [
                { text: "ä¼šå¸¦æ¥å¥½è¿å’Œä¿æŠ¤", type: "faith" },
                { text: "æœ‰å¿ƒç†å®‰æ…°ä½œç”¨", type: "mixed" },
                { text: "å®Œå…¨æ²¡ç”¨ï¼Œæ˜¯è¿·ä¿¡", type: "reason" },
                { text: "æ”¾ä¸æ”¾éƒ½ä¸€æ ·", type: "fate" }
            ]},
            { q: "ä½ æ›´å¸¸ç”¨çš„å†³ç­–æ–¹å¼æ˜¯ï¼š", options: [
                { text: "ç¥ˆç¥·åå‡­å¿ƒä¸­æ„Ÿåº”", type: "faith" },
                { text: "ç»¼åˆå„æ–¹æ„è§åå†³å®š", type: "mixed" },
                { text: "ç†æ€§åˆ†æåˆ©å¼Šåå†³å®š", type: "reason" },
                { text: "éšä¾¿ï¼Œæ€æ ·éƒ½è¡Œ", type: "fate" }
            ]},
            { q: "å¦‚æœåŒ»ç”Ÿå’Œé«˜åƒ§ç»™å‡ºä¸åŒçš„å¥åº·å»ºè®®ï¼Œä½ å€¾å‘ï¼š", options: [
                { text: "å¬é«˜åƒ§çš„ï¼Œä»–æœ‰æ™ºæ…§", type: "faith" },
                { text: "ä¸¤è€…éƒ½å¬ï¼Œç»¼åˆè€ƒè™‘", type: "mixed" },
                { text: "åªå¬åŒ»ç”Ÿçš„ä¸“ä¸šå»ºè®®", type: "reason" },
                { text: "éƒ½ä¸é‡è¦ï¼Œé¡ºå…¶è‡ªç„¶", type: "fate" }
            ]},
            { q: "ä½ ç›¸ä¿¡'ç§‘å­¦ä¸å®—æ•™å¯ä»¥å¹¶å­˜'å—ï¼Ÿ", options: [
                { text: "å®Œå…¨å¯ä»¥ï¼Œæ®Šé€”åŒå½’", type: "faith" },
                { text: "å¯ä»¥å¹¶å­˜ï¼Œå„æœ‰é¢†åŸŸ", type: "mixed" },
                { text: "ä¸èƒ½ï¼Œå®—æ•™æ˜¯è½åçš„", type: "reason" },
                { text: "æ— æ‰€è°“ï¼Œå­˜ä¸å­˜åœ¨éƒ½è¡Œ", type: "fate" }
            ]},
            { q: "ä½ è§‰å¾—'åŠªåŠ›å’Œå¥½è¿'çš„å…³ç³»æ˜¯ï¼š", options: [
                { text: "å¥½è¿æ¥è‡ªç¥æ˜åº‡ä½‘", type: "faith" },
                { text: "åŠªåŠ›å’Œè¿æ°”éƒ½é‡è¦", type: "mixed" },
                { text: "åªæœ‰åŠªåŠ›æ‰èƒ½æˆåŠŸ", type: "reason" },
                { text: "å‘½ä¸­æ³¨å®šï¼ŒåŠªåŠ›ä¹Ÿæ²¡ç”¨", type: "fate" }
            ]},
            { q: "ä½ æ›´å–œæ¬¢çš„è§£é‡Šæ–¹å¼ï¼š", options: [
                { text: "ç¥è¿¹å’ŒçµéªŒçš„æ•…äº‹", type: "faith" },
                { text: "å¯Œæœ‰å“²ç†çš„å¯“è¨€", type: "mixed" },
                { text: "ä¸¥è°¨çš„ç§‘å­¦è§£é‡Š", type: "reason" },
                { text: "éƒ½è¡Œï¼Œå¬å¬å°±å¥½", type: "fate" }
            ]},
            { q: "å¦‚æœæœ‰äººè¯´'ä½ å‘è´¢äº†æ˜¯å› ä¸ºä¸‰æ‹œ'ï¼Œä½ ä¼šï¼š", options: [
                { text: "å¯¹ï¼Œå¯èƒ½çœŸçš„æœ‰å…³", type: "faith" },
                { text: "ç¬‘ç¬‘ï¼Œä¸å¦å®šä¹Ÿä¸è®¤åŒ", type: "mixed" },
                { text: "åé©³ï¼Œè¿™æ˜¯è¿·ä¿¡æƒ³æ³•", type: "reason" },
                { text: "éšä¾¿ä»–æ€ä¹ˆè¯´", type: "fate" }
            ]},
            { q: "ä½ è§‰å¾—'è´¢å¯Œ'çš„æœ€ç»ˆæ„ä¹‰æ˜¯ï¼š", options: [
                { text: "è¡Œå–„å¸ƒæ–½ï¼Œç§¯ç´¯åŠŸå¾·", type: "faith" },
                { text: "æ»¡è¶³ç”Ÿæ´»ï¼Œå¸®åŠ©ä»–äºº", type: "mixed" },
                { text: "å®ç°ä»·å€¼ï¼Œåˆ›é€ å½±å“", type: "reason" },
                { text: "åŠæ—¶è¡Œä¹ï¼Œé’±è´¢èº«å¤–ç‰©", type: "fate" }
            ]},
            { q: "ä½ å¯¹'æ‹œä¸‰æ‹œ'çš„æ½œæ„è¯†æ„Ÿå—ï¼š", options: [
                { text: "å¸¦æ¥å®‰å…¨æ„Ÿå’Œåº‡ä½‘", type: "faith" },
                { text: "æ˜¯æ–‡åŒ–ä¼ ç»Ÿçš„ä¸€éƒ¨åˆ†", type: "mixed" },
                { text: "è§‰å¾—ä¸èˆ’æœï¼Œæ˜¯è¿·ä¿¡", type: "reason" },
                { text: "æ²¡æ„Ÿè§‰ï¼Œæ— æ‰€è°“", type: "fate" }
            ]},
            { q: "ä½ æ›´æ„¿æ„ç›¸ä¿¡å“ªç§æ•…äº‹ï¼š", options: [
                { text: "ç¥æ˜æ˜¾çµæ•‘äººçš„å¥‡è¿¹", type: "faith" },
                { text: "äººä¸è‡ªç„¶å’Œè°çš„æ™ºæ…§", type: "mixed" },
                { text: "ç§‘å­¦æ”¹å˜ä¸–ç•Œçš„å£®ä¸¾", type: "reason" },
                { text: "éƒ½å·®ä¸å¤šï¼Œéšä¾¿å¬å¬", type: "fate" }
            ]},
            { q: "å¦‚æœé‡åˆ°ä¸å…¬å¹³ï¼Œä½ ä¼šï¼š", options: [
                { text: "ç¥ˆç¥·æ±‚ç¥æ˜ä¼¸å¼ æ­£ä¹‰", type: "faith" },
                { text: "å…ˆå°è¯•æ²Ÿé€šåå•†", type: "mixed" },
                { text: "æ®ç†åŠ›äº‰ï¼Œç»´æŠ¤æƒç›Š", type: "reason" },
                { text: "ç®—äº†ï¼Œæ¥å—å‘½è¿å®‰æ’", type: "fate" }
            ]},
            { q: "ä½ å¯¹'è¿·ä¿¡'è¿™ä¸ªè¯çš„æ„Ÿè§‰ï¼š", options: [
                { text: "ä¸æ˜¯è¿·ä¿¡ï¼Œæ˜¯ä¿¡ä»°", type: "faith" },
                { text: "è¦çœ‹å…·ä½“æƒ…å†µ", type: "mixed" },
                { text: "è´Ÿé¢è¯ï¼Œè¯¥æ‰¹åˆ¤", type: "reason" },
                { text: "æ— æ‰€è°“ï¼Œä»€ä¹ˆéƒ½è¡Œ", type: "fate" }
            ]},
            { q: "å½“åˆ«äººè¯´'æ‹œä¸‰æ‹œèƒ½å‘è´¢'æ—¶ï¼Œä½ ä¼šï¼š", options: [
                { text: "è§‰å¾—æœ‰é“ç†ï¼Œæƒ³è¯•è¯•", type: "faith" },
                { text: "ä¿æŒå¥½å¥‡å’Œå¼€æ”¾", type: "mixed" },
                { text: "è§‰å¾—å¯ç¬‘ï¼Œæ˜¯éª—äººçš„", type: "reason" },
                { text: "ä¸å…³å¿ƒï¼Œå†·æ¼ å¯¹å¾…", type: "fate" }
            ]},
            { q: "ä½ æ›´æ„¿æ„æˆä¸ºçš„äººï¼š", options: [
                { text: "ä¿¡ä»°åšå®šçš„è™”è¯šè€…", type: "faith" },
                { text: "å¹³è¡¡æ™ºæ…§çš„å¤„ä¸–è€…", type: "mixed" },
                { text: "ç†æ€§ç¿æ™ºçš„æ€è€ƒè€…", type: "reason" },
                { text: "éšé‡è€Œå®‰çš„è‡ªç”±äºº", type: "fate" }
            ]},
            { q: "å¦‚æœæœ€åå‘Šè¯‰ä½ ï¼šä½ å…¶å®æ¯”è‡ªå·±æƒ³è±¡çš„æ›´'è™”è¯š/æ›´ç†æ™º'ï¼Œä½ ä¼šï¼š", options: [
                { text: "æ¥å—ï¼Œå¯èƒ½ç¡®å®å¦‚æ­¤", type: "faith" },
                { text: "åŠä¿¡åŠç–‘ï¼Œéœ€è¦æ€è€ƒ", type: "mixed" },
                { text: "è´¨ç–‘ï¼Œè¦çœ‹è¯æ®", type: "reason" },
                { text: "ä¸åœ¨ä¹ï¼Œç»“æœæ— æ‰€è°“", type: "fate" }
            ]}
        ];

        // æ‰“ä¹±é€‰é¡¹é¡ºåºï¼Œé¿å…å›ºå®šçš„åˆ†ç±»æ¬¡åº
        function shuffleOptions(options) {
            const shuffled = [...options];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        // åˆå§‹åŒ–é¢˜ç›®ï¼Œæ‰“ä¹±æ¯é¢˜çš„é€‰é¡¹é¡ºåº
        const questions = questionsData.map(q => ({
            q: q.q,
            options: shuffleOptions(q.options)
        }));

        let currentQuestion = 0;
        let answers = [];
        let testMode = false;

        function toggleTestMode() {
            testMode = !testMode;
            const btn = document.getElementById('testModeBtn');
            if (testMode) {
                btn.textContent = 'ğŸ” Test Mode: ON';
                btn.style.background = '#4CAF50';
                showTestNotification('ğŸ” Test Mode Enabled - Check console (F12)', 'success');
                console.log('%cğŸ” TEST MODE ENABLED', 'background: #4CAF50; color: white; padding: 10px; font-size: 16px; font-weight: bold;');
                console.log('ğŸ“‹ Instructions:');
                console.log('1. Open this console (F12)');
                console.log('2. Complete the quiz');
                console.log('3. Watch for data being sent');
                console.log('4. Check your Google Sheet for results');
            } else {
                btn.textContent = 'ğŸ” Test Mode';
                btn.style.background = '#ff9800';
                showTestNotification('Test Mode Disabled', 'success');
                console.log('%cğŸ” TEST MODE DISABLED', 'background: #ff9800; color: white; padding: 10px; font-size: 16px; font-weight: bold;');
            }
        }

        function renderQuestion() {
            const progress = ((currentQuestion / questions.length) * 100).toFixed(0);
            const content = document.getElementById('content');
            
            content.innerHTML = `
                <h2>é—®é¢˜ ${currentQuestion + 1} / ${questions.length}</h2>
                <div class="progress">
                    <div class="progress-bar" style="width: ${progress}%"></div>
                </div>
                <div class="question">${questions[currentQuestion].q}</div>
                <div class="options">
                    ${questions[currentQuestion].options.map((opt, i) => 
                        `<button class="option-btn" onclick="handleAnswer(${i})">${opt.text}</button>`
                    ).join('')}
                </div>
            `;
        }

        function handleAnswer(optionIndex) {
            const selectedOption = questions[currentQuestion].options[optionIndex];
            answers[currentQuestion] = selectedOption.type;
            
            if (testMode) {
                console.log(`ğŸ“ Question ${currentQuestion + 1} answered: "${selectedOption.text}" (type: ${selectedOption.type})`);
            }
            
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                renderQuestion();
            } else {
                if (testMode) {
                    console.log('%câœ… Quiz Completed!', 'background: #4CAF50; color: white; padding: 10px; font-size: 14px; font-weight: bold;');
                    console.log('ğŸ“Š Calculating results...');
                }
                calculateResult();
            }
        }

        function calculateResult() {
            let scores = { faith: 0, reason: 0, mixed: 0, fate: 0 };
            
            // ç®€å•è®¡ç®—ï¼šç›´æ¥ç»Ÿè®¡æ¯ç§ç±»å‹çš„æ•°é‡
            answers.forEach(answerType => {
                if (scores.hasOwnProperty(answerType)) {
                    scores[answerType]++;
                } else {
                    console.warn('æœªçŸ¥çš„ç­”æ¡ˆç±»å‹:', answerType);
                }
            });

            const sortedScores = Object.entries(scores).sort((a, b) => b[1] - a[1]);
            const dominant = sortedScores[0][0];

            let analysis = "";
            let analysisType = "";
            if (dominant === "faith") {
                analysisType = "ä¿¡ä»°å‹";
                analysis = "ä½ å€¾å‘<strong>ä¿¡ä»°å‹</strong>ï¼šå¯¹å®—æ•™ä¸ä¼ ç»Ÿæ–‡åŒ–æœ‰æ·±åšè®¤åŒï¼Œå®¹æ˜“åœ¨ä»ªå¼ä¸­æ‰¾åˆ°å®‰å…¨æ„Ÿã€‚";
            } else if (dominant === "reason") {
                analysisType = "ç†æ™ºå‹";
                analysis = "ä½ å€¾å‘<strong>ç†æ™ºå‹</strong>ï¼šæ›´ä¾èµ–é€»è¾‘ä¸å®è·µï¼Œé‡è§†ç§‘å­¦å’Œè‡ªæˆ‘åˆ¤æ–­ã€‚";
            } else if (dominant === "mixed") {
                analysisType = "æŠ˜è¡·å‹";
                analysis = "ä½ å€¾å‘<strong>æŠ˜è¡·å‹</strong>ï¼šä¿¡ä»°ä¸ç†æ™ºå…¼é¡¾ï¼Œæ—¢å°Šé‡ä¼ ç»Ÿï¼Œä¹Ÿé‡è§†ç°å®ã€‚";
            } else {
                analysisType = "å®¿å‘½å‹";
                analysis = "ä½ å€¾å‘<strong>å®¿å‘½å‹</strong>ï¼šæ›´éšç¼˜é¡ºåŠ¿ï¼Œå®¹æ˜“æ¥å—å‘½è¿å®‰æ’ã€‚";
            }

            if (testMode) {
                console.log('%cğŸ“Š RESULTS CALCULATED', 'background: #2196F3; color: white; padding: 10px; font-size: 14px; font-weight: bold;');
                console.log('Result Type:', analysisType);
                console.log('Scores:', scores);
                console.log('Dominant Category:', dominant);
                console.log('---');
            }

            // ä¿å­˜ç»“æœä¾›é‚®ä»¶å‘é€ä½¿ç”¨
            currentScores = scores;
            currentResultType = analysisType;
            currentAnalysis = analysis;

            renderResult(scores, analysis, analysisType);
        }

        async function sendToGoogleSheets(scores, resultType, email = '') {
            const scriptURL = 'https://script.google.com/macros/s/AKfycbxFcxcKKOKOtpL-WhbzqP0E1anpvQU7PBhBGRHVaRf0Ssw3_kyK2q-KZ9MsaCF6mqfFLA/exec';
            
            const data = {
                æ—¶é—´æˆ³: new Date().toLocaleString('zh-CN', { timeZone: 'Asia/Shanghai' }),
                äººæ ¼ç±»å‹: resultType,
                ä¿¡ä»°åˆ†æ•°: scores.faith,
                ç†æ™ºåˆ†æ•°: scores.reason,
                æŠ˜è¡·åˆ†æ•°: scores.mixed,
                å®¿å‘½åˆ†æ•°: scores.fate,
                æ€»é¢˜æ•°: questions.length,
                æ‰€æœ‰ç­”æ¡ˆ: answers.join(', '),
                é‚®ç®±åœ°å€: email
            };

            // Log to console for testing
            console.log('ğŸ“Š Sending data to Google Sheets...');
            console.log('ğŸ“ Data:', data);
            console.log('ğŸ”— Script URL:', scriptURL);

            try {
                const response = await fetch(scriptURL, {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(data)
                });
                console.log('âœ… Results sent to Google Sheets successfully');
                console.log('Response:', response);
                showTestNotification('âœ… Data sent successfully!', 'success');
            } catch (error) {
                console.error('âŒ Error sending to Google Sheets:', error);
                showTestNotification('âŒ Error sending data', 'error');
            }
        }

        function showTestNotification(message, type) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 20px;
                background: ${type === 'success' ? '#4CAF50' : '#f44336'};
                color: white;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.3);
                z-index: 10000;
                animation: slideIn 0.3s ease;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        function renderResult(scores, analysis, analysisType) {
            const content = document.getElementById('content');
            
            // ç”Ÿæˆè¯¦ç»†çš„ç­”é¢˜è®°å½•
            const typeNames = {
                'faith': 'ä¿¡ä»°å‹',
                'mixed': 'æŠ˜è¡·å‹', 
                'reason': 'ç†æ™ºå‹',
                'fate': 'å®¿å‘½å‹'
            };
            
            let detailedAnswers = '';
            answers.forEach((answerType, index) => {
                const question = questionsData[index];
                const selectedOption = question.options.find(opt => opt.type === answerType);
                detailedAnswers += `
                    <div style="margin-bottom: 15px; padding: 12px; background: #f9f9f9; border-radius: 6px; text-align: left;">
                        <div style="font-weight: bold; color: #667eea; margin-bottom: 5px;">é—®é¢˜ ${index + 1}</div>
                        <div style="margin-bottom: 5px; line-height: 1.4;">${question.q}</div>
                        <div style="color: #666; margin-top: 5px;">âœ“ ä½ çš„ç­”æ¡ˆï¼š${selectedOption.text}</div>
                        <div style="color: #764ba2; font-size: 14px; margin-top: 3px; font-weight: bold;">â†’ åˆ†ç±»ï¼š${typeNames[answerType]}</div>
                    </div>
                `;
            });
            
            content.innerHTML = `
                <div class="result">
                    <h2>ğŸ‰ æµ‹éªŒç»“æœ</h2>
                    <div class="analysis">${analysis}</div>
                    <div class="scores">
                        <div class="score-item">
                            <div class="score-label">ä¿¡ä»°æˆåˆ†</div>
                            <div class="score-value">${scores.faith}</div>
                        </div>
                        <div class="score-item">
                            <div class="score-label">ç†æ™ºæˆåˆ†</div>
                            <div class="score-value">${scores.reason}</div>
                        </div>
                        <div class="score-item">
                            <div class="score-label">æŠ˜è¡·æˆåˆ†</div>
                            <div class="score-value">${scores.mixed}</div>
                        </div>
                        <div class="score-item">
                            <div class="score-label">å®¿å‘½æˆåˆ†</div>
                            <div class="score-value">${scores.fate}</div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 30px; padding: 20px; background: #f5f5f5; border-radius: 8px;">
                        <h3 style="color: #667eea; margin-bottom: 10px; font-size: 18px;">ğŸ“§ å°†æµ‹è¯•ç»“æœå‘é€åˆ°é‚®ç®±</h3>
                        <p style="color: #666; font-size: 14px; margin-bottom: 15px; line-height: 1.5;">
                            ç•™ä¸‹æ‚¨çš„é‚®ç®±åœ°å€ï¼Œæˆ‘ä»¬å°†å‘é€åŒ…å«æ¯é¢˜è¯¦ç»†ç­”æ¡ˆã€åˆ†ç±»æ­æ™“å’Œäººæ ¼åˆ†æçš„å®Œæ•´æŠ¥å‘Šï¼ˆå¯é€‰ï¼‰
                        </p>
                        <input type="email" id="emailInput" placeholder="è¾“å…¥æ‚¨çš„é‚®ç®±åœ°å€ï¼ˆå¯ç•™ç©ºï¼‰" 
                            style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 6px; font-size: 16px; margin-bottom: 15px;">
                        <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                            <button class="restart-btn" onclick="sendDetailedReport()" style="flex: 1; min-width: 150px;">
                                ğŸ“¨ å‘é€æŠ¥å‘Š
                            </button>
                            <button class="restart-btn" onclick="restart()" style="flex: 1; min-width: 150px; background: linear-gradient(135deg, #6c757d 0%, #5a6268 100%);">
                                ğŸ”„ é‡æ–°æµ‹è¯•
                            </button>
                        </div>
                    </div>
                    
                    <details style="margin-top: 25px; text-align: left; cursor: pointer;">
                        <summary style="color: #667eea; font-weight: bold; padding: 15px; background: #f5f5f5; border-radius: 8px; list-style: none; display: flex; justify-content: space-between; align-items: center;">
                            <span>ğŸ“‹ æŸ¥çœ‹è¯¦ç»†ç­”é¢˜è®°å½•ï¼ˆç‚¹å‡»å±•å¼€ï¼‰</span>
                            <span style="font-size: 12px; color: #999;">â–¼</span>
                        </summary>
                        <div style="margin-top: 15px; max-height: 500px; overflow-y: auto; padding: 10px; border: 1px solid #e0e0e0; border-radius: 8px;">
                            ${detailedAnswers}
                        </div>
                    </details>
                </div>
            `;
        }

        // ä¿å­˜å½“å‰ç»“æœä¾›é‚®ä»¶å‘é€ä½¿ç”¨
        let currentScores = {};
        let currentResultType = '';
        let currentAnalysis = '';

        async function sendDetailedReport() {
            const emailInput = document.getElementById('emailInput');
            const email = emailInput ? emailInput.value.trim() : '';
            
            if (email && !isValidEmail(email)) {
                showTestNotification('âŒ è¯·è¾“å…¥æœ‰æ•ˆçš„é‚®ç®±åœ°å€', 'error');
                return;
            }
            
            // å‡†å¤‡è¯¦ç»†çš„æµ‹è¯•ç»“æœæ•°æ®
            const typeNames = {
                'faith': 'ä¿¡ä»°å‹',
                'mixed': 'æŠ˜è¡·å‹', 
                'reason': 'ç†æ™ºå‹',
                'fate': 'å®¿å‘½å‹'
            };
            
            const detailedResults = {
                æ—¶é—´æˆ³: new Date().toLocaleString('zh-CN', { timeZone: 'Asia/Shanghai' }),
                äººæ ¼ç±»å‹: currentResultType,
                ä¿¡ä»°åˆ†æ•°: currentScores.faith,
                ç†æ™ºåˆ†æ•°: currentScores.reason,
                æŠ˜è¡·åˆ†æ•°: currentScores.mixed,
                å®¿å‘½åˆ†æ•°: currentScores.fate,
                æ€»é¢˜æ•°: questions.length,
                é‚®ç®±åœ°å€: email,
                äººæ ¼è§£é‡Š: currentAnalysis.replace(/<[^>]*>/g, ''), // ç§»é™¤HTMLæ ‡ç­¾
                è¯¦ç»†ç­”é¢˜: answers.map((answerType, index) => {
                    const question = questionsData[index];
                    const selectedOption = question.options.find(opt => opt.type === answerType);
                    return {
                        é¢˜å·: index + 1,
                        é—®é¢˜: question.q,
                        ç­”æ¡ˆ: selectedOption ? selectedOption.text : '',
                        åˆ†ç±»: typeNames[answerType]
                    };
                })
            };

            const scriptURL = 'https://script.google.com/macros/s/AKfycbxFcxcKKOKOtpL-WhbzqP0E1anpvQU7PBhBGRHVaRf0Ssw3_kyK2q-KZ9MsaCF6mqfFLA/exec';
            
            showTestNotification('ğŸ“¤ æ­£åœ¨å‘é€æŠ¥å‘Š...', 'success');
            
            try {
                const response = await fetch(scriptURL, {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(detailedResults)
                });
                
                if (email) {
                    showTestNotification('âœ… æŠ¥å‘Šå·²å‘é€åˆ°æ‚¨çš„é‚®ç®±ï¼è¯·æŸ¥æ”¶', 'success');
                } else {
                    showTestNotification('âœ… ç»“æœå·²ä¿å­˜ï¼', 'success');
                }
                
                if (testMode) {
                    console.log('ğŸ“§ Detailed report data:', detailedResults);
                }
            } catch (error) {
                console.error('âŒ Error:', error);
                showTestNotification('âŒ å‘é€å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•', 'error');
            }
        }

        function isValidEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }

        function restart() {
            currentQuestion = 0;
            answers = [];
            // é‡æ–°æ‰“ä¹±é€‰é¡¹é¡ºåº
            questions.forEach((q, index) => {
                q.options = shuffleOptions(questionsData[index].options);
            });
            renderQuestion();
        }

        // Initialize
        renderQuestion();
    </script>
</body>
</html>
